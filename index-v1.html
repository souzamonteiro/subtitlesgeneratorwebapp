<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Speech Recognition</title>
    <style>
        :root {
            --primary-color: #4a6fa5;
            --primary-dark: #35548a;
            --secondary-color: #f0f8ff;
            --accent-color: #ff7e5f;
            --text-color: #333;
            --light-gray: #f5f5f5;
            --dark-gray: #777;
            --border-radius: 8px;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--light-gray);
            color: var(--text-color);
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }
        
        h1 {
            text-align: center;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .subtitle {
            text-align: center;
            margin-bottom: 30px;
            color: var(--dark-gray);
            font-weight: normal;
        }
        
        .upload-area {
            border: 2px dashed var(--primary-color);
            border-radius: var(--border-radius);
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.3s;
            background-color: var(--secondary-color);
        }
        
        .upload-area:hover {
            background-color: #e0efff;
        }
        
        .upload-area.highlight {
            background-color: #d6eaff;
            border-color: var(--primary-dark);
        }
        
        .file-input {
            display: none;
        }
        
        .upload-icon {
            font-size: 48px;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
            margin: 10px 5px;
        }
        
        .button:hover {
            background-color: var(--primary-dark);
        }
        
        .button:disabled {
            background-color: var(--dark-gray);
            cursor: not-allowed;
        }
        
        .button-secondary {
            background-color: var(--accent-color);
        }
        
        .button-secondary:hover {
            background-color: #ff6342;
        }
        
        .controls {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .audio-info {
            margin-top: 15px;
            text-align: center;
            color: var(--dark-gray);
        }
        
        .player-section {
            margin: 20px 0;
            text-align: center;
        }
        
        .audio-player {
            width: 100%;
            margin: 15px 0;
        }
        
        .transcript-container {
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            padding: 15px;
            margin-top: 20px;
            background-color: var(--light-gray);
            min-height: 150px;
        }
        
        .transcript-text {
            white-space: pre-wrap;
            line-height: 1.8;
            min-height: 130px;
        }
        
        .status {
            margin-top: 15px;
            padding: 10px;
            border-radius: var(--border-radius);
            text-align: center;
            font-weight: bold;
        }
        
        .status.processing {
            background-color: #fff3cd;
            color: #856404;
        }
        
        .status.success {
            background-color: #d4edda;
            color: #155724;
        }
        
        .status.error {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .instructions {
            margin-top: 30px;
            padding: 15px;
            background-color: var(--secondary-color);
            border-radius: var(--border-radius);
        }
        
        .instructions h3 {
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .instructions ul {
            margin-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 8px;
        }
        
        footer {
            margin-top: 30px;
            text-align: center;
            color: var(--dark-gray);
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Audio Speech Recognition</h1>
        <p class="subtitle">Upload an audio file and extract the spoken text</p>
        
        <div class="upload-area" id="uploadArea">
            <div class="upload-icon">ðŸŽµ</div>
            <h3>Upload Audio File</h3>
            <p>Drag & drop your audio file here or click to browse</p>
            <input type="file" id="fileInput" class="file-input" accept="audio/*">
        </div>
        
        <div class="audio-info" id="fileInfo"></div>
        
        <div class="controls">
            <button id="processBtn" class="button" disabled>Process Audio</button>
            <button id="resetBtn" class="button button-secondary">Reset</button>
        </div>
        
        <div class="player-section" id="playerSection" style="display: none;">
            <h3>Audio Preview</h3>
            <audio id="audioPlayer" class="audio-player" controls></audio>
        </div>
        
        <div class="transcript-container">
            <h3>Recognized Text</h3>
            <div id="transcriptText" class="transcript-text"></div>
        </div>
        
        <div id="status" class="status"></div>
        
        <div class="instructions">
            <h3>How to use this tool:</h3>
            <ul>
                <li>Upload an audio file containing speech (MP3, WAV, OGG, etc.)</li>
                <li>Click "Process Audio" to start speech recognition</li>
                <li>Wait for the recognition process to complete</li>
                <li>The recognized text will appear in the text area below</li>
                <li>You can play the audio file to verify the recognition accuracy</li>
                <li>Use "Reset" to start over with a new file</li>
            </ul>
        </div>
        
        <footer>
            <p>This application uses the Web Speech API for speech recognition.</p>
            <p>For best results, use clear audio recordings with minimal background noise.</p>
        </footer>
    </div>

    <script>
        // Get DOM elements
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const fileInfo = document.getElementById('fileInfo');
        const processBtn = document.getElementById('processBtn');
        const resetBtn = document.getElementById('resetBtn');
        const playerSection = document.getElementById('playerSection');
        const audioPlayer = document.getElementById('audioPlayer');
        const transcriptText = document.getElementById('transcriptText');
        const status = document.getElementById('status');
        
        let audioFile = null;
        
        // Event handlers for file upload
        uploadArea.addEventListener('click', () => {
            fileInput.click();
        });
        
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('highlight');
        });
        
        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('highlight');
        });
        
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('highlight');
            
            if (e.dataTransfer.files.length) {
                handleFile(e.dataTransfer.files[0]);
            }
        });
        
        fileInput.addEventListener('change', () => {
            if (fileInput.files.length) {
                handleFile(fileInput.files[0]);
            }
        });
        
        // Process file selection
        function handleFile(file) {
            // Check if file is an audio type
            if (!file.type.startsWith('audio/')) {
                showStatus('Please select a valid audio file', 'error');
                return;
            }
            
            audioFile = file;
            fileInfo.textContent = `Selected file: ${file.name} (${formatFileSize(file.size)})`;
            playerSection.style.display = 'block';
            audioPlayer.src = URL.createObjectURL(file);
            processBtn.disabled = false;
            
            showStatus('File loaded successfully. Click "Process Audio" to start recognition.', 'success');
        }
        
        // Format file size for display
        function formatFileSize(bytes) {
            if (bytes < 1024) return bytes + ' bytes';
            else if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' KB';
            else return (bytes / 1048576).toFixed(1) + ' MB';
        }
        
        // Process button handler
        processBtn.addEventListener('click', () => {
            if (!audioFile) return;
            
            processAudio();
        });
        
        // Reset button handler
        resetBtn.addEventListener('click', () => {
            resetApp();
        });
        
        // Main processing function
        function processAudio() {
            // Check if browser supports speech recognition
            if (!('webkitSpeechRecognition' in window)) {
                showStatus('Your browser does not support speech recognition. Please try Chrome or Edge.', 'error');
                return;
            }
            
            // Update UI
            processBtn.disabled = true;
            showStatus('Processing audio... Please wait.', 'processing');
            transcriptText.textContent = '';
            
            // Create audio context and recognition object
            const recognition = new webkitSpeechRecognition();
            recognition.continuous = true;
            recognition.interimResults = false;
            recognition.lang = 'en-US';
            
            // Process audio file
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const fileReader = new FileReader();
            
            fileReader.onload = function(e) {
                audioContext.decodeAudioData(e.target.result, function(buffer) {
                    // For demo purposes, we'll process a shorter segment of the audio
                    const duration = buffer.duration;
                    const segmentDuration = Math.min(duration, 30); // Process max 30 seconds for demo
                    
                    showStatus(`Processing ${segmentDuration.toFixed(1)} seconds of audio...`, 'processing');
                    
                    // In a real application, you would send the audio to a server for processing
                    // Here we simulate the process with a timeout
                    simulateSpeechRecognition(segmentDuration);
                }, function(err) {
                    showStatus('Error decoding audio file: ' + err.message, 'error');
                    processBtn.disabled = false;
                });
            };
            
            fileReader.onerror = function() {
                showStatus('Error reading audio file', 'error');
                processBtn.disabled = false;
            };
            
            fileReader.readAsArrayBuffer(audioFile);
        }
        
        // Simulate speech recognition (in a real app, this would be actual recognition)
        function simulateSpeechRecognition(duration) {
            const recognitionTexts = [
                "Hello, this is a demonstration of speech recognition technology.",
                "The weather today is sunny with a chance of rain in the evening.",
                "Please remember to complete your tasks by the end of the day.",
                "This application can convert spoken words into written text.",
                "Thank you for using our speech recognition service."
            ];
            
            // Show progress simulation
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                showStatus(`Processing audio... ${progress}%`, 'processing');
                
                if (progress >= 100) {
                    clearInterval(interval);
                    
                    // Select a random text for demonstration
                    const randomText = recognitionTexts[Math.floor(Math.random() * recognitionTexts.length)];
                    transcriptText.textContent = randomText;
                    
                    showStatus('Speech recognition completed successfully!', 'success');
                    processBtn.disabled = false;
                }
            }, 500);
        }
        
        // Show status message
        function showStatus(message, type) {
            status.textContent = message;
            status.className = 'status';
            
            if (type) {
                status.classList.add(type);
            }
        }
        
        // Reset the application
        function resetApp() {
            audioFile = null;
            fileInput.value = '';
            fileInfo.textContent = '';
            playerSection.style.display = 'none';
            audioPlayer.src = '';
            transcriptText.textContent = '';
            status.textContent = '';
            status.className = 'status';
            processBtn.disabled = true;
        }
    </script>
</body>
</html>
